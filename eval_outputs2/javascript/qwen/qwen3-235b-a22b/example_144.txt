<think>
No reasoning found</think>
```javascript
      if (captureRightClick) onContextMenu(cm, e);
      break;
    }
  }

<<<<<<< HEAD
  var lastClick, lastDoubleClick;
  function leftButtonDown(cm, e, start) {
    if (!cm.state.focused) onFocus(cm);
=======
    setTimeout(bind(ensureFocus, cm), 0);
>>>>>>> e1cfb7fd68e7988f508076063ebc17ddbabe2c92

    var now = +new Date, type;
    if (lastDoubleClick && lastDoubleClick.time > now - 400 && cmp(lastDoubleClick.pos, start) == 0) {
      type = "triple";
    } else if (lastClick && lastClick.time > now - 400 && cmp(lastClick.pos, start) == 0) {
```