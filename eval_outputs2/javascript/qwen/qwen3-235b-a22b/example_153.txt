<think>
No reasoning found</think>
```javascript
      pushPendingSelection(doc, doc.history.done);
      doc.history.atomicSelection = false;
    }

    var move = operation(cm, function(e) {
      if (!ie_lt9 && (ie ? !e.buttons : !e_button(e))) done(e);
      else extend(e);
    });
    var up = operation(cm, done);
    on(document, "mousemove", move);
    on(document, "mouseup", up);

```