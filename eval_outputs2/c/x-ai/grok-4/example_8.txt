<think>
No reasoning found</think>
```c

        if (ret) {
            /* Still no luck, try the slow approach */
            mm_do_lock_slow(&lock->locked);
        }
<<<<<<< HEAD
=======
        _spinlock_unlock(lock);
        sched_yield();
>>>>>>> 5921a191ef461e97a894063110b45f415affddcb
    }
    return 1;
}

static void mm_do_lock_slow(volatile unsigned int* locked)

```