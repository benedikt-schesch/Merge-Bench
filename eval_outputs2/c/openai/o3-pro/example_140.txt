<think>
No reasoning found</think>
```c
      pid = waitpid(-1, &status, WNOHANG);

      pty = find234(ptys_by_pid, &pid, pty_find_by_pid);

      if (pty)
        ret = pty_real_select_result(pty, -1, status) && ret;
    } while (pid > 0);
  } else {
    pty = find234(ptys_by_fd, &fd, pty_find_by_fd);

    if (pty)
```