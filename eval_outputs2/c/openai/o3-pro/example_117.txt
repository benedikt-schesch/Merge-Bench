<think>
No reasoning found</think>
```c
  if (error_msg) {
    logevent(telnet->frontend, error_msg);
    connection_fatal(telnet->frontend, "%s", error_msg);
  }
  /* Otherwise, the remote side closed the connection normally. */
  return 0;
}

static void telnet_receive(Plug plug, int urgent, char *data, int len)
{
  Telnet telnet = (Telnet)plug;
```