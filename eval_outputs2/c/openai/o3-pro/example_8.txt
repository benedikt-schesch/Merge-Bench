<think>
No reasoning found</think>
```c

        if (ret) {
            /* Still no luck, try the slow approach */
            mm_do_lock_slow(&lock->locked);
        }
        _spinlock_unlock(lock);
        sched_yield();
    }
    return 1;
}

static void mm_do_lock_slow(volatile unsigned int* locked)

```