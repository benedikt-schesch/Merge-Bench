<think>
No reasoning found</think>
```c
    } else {
      /* This is the pre-C99 glibc error condition: <0 means the
       * buffer wasn't big enough, so we enlarge it a bit and hope. */
      size += 512;
    }
    newsize = oldlen + size;
    buf = sresize(buf, newsize, char);
  }
}

char *dupvprintf(const char *fmt, va_list ap)
{

```