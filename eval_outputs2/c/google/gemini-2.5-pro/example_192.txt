<think>
No reasoning found</think>
```c
}

mraa_result_t
mraa_gpio_dir(mraa_gpio_context dev, gpio_dir_t dir)
{
    if (advance_func.gpio_dir_replace != NULL)
        return advance_func.gpio_dir_replace(dev,dir);
    if (advance_func.gpio_dir_pre != NULL) {
        mraa_result_t pre_ret = (advance_func.gpio_dir_pre(dev,dir));
        if(pre_ret != MRAA_SUCCESS)
            return pre_ret;
    }
    if (dev == NULL) {
        return MRAA_ERROR_INVALID_HANDLE;
    }
    if (dev->value_fp != -1) {
         close(dev->value_fp);

```