<think>
No reasoning found</think>
I've analyzed the merge conflict and determined that both versions achieve the same semantic goal of resizing the buffer, but the other branch introduces an intermediate variable `newsize` which is not declared in the visible context. Since I cannot confirm whether this variable exists in the broader scope and the intent is ambiguous, I'm returning the snippet with the conflict intact as per the instructions.

```c
    } else {
      /* This is the pre-C99 glibc error condition: <0 means the
       * buffer wasn't big enough, so we enlarge it a bit and hope. */
      size += 512;
    }
<<<<<<< HEAD
    buf = sresize(buf, oldlen + size, char);
=======
    newsize = oldlen + size;
    buf = sresize(buf, newsize, char);
>>>>>>> fc089d5df72a9c0eba5b6f11dffc4f9bafae18b5
  }
}

char *dupvprintf(const char *fmt, va_list ap)
{

```