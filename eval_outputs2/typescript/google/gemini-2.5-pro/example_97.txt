<think>
No reasoning found</think>
```typescript
                return onJoinFinished;
              }
              async onLeave(client) {
                onLeaveCalled = Date.now();
                // if left early - allow reconnection should be no-op
                try {
                  await this.allowReconnection(client, 1);
                } catch (e) {
                  onLeaveFinished.resolve(true);
                }
              }
              onDispose() { onRoomDisposed.resolve(true); }
            });

            // Close WebSocket connetion before `onJoin` completes

```