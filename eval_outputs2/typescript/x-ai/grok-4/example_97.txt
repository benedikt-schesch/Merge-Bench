<think>
No reasoning found</think>
```typescript
                return onJoinFinished;
              }
              async onLeave(client) {
                onLeaveCalled = Date.now();
                // if left early - allow reconnection should be no-op
<<<<<<< HEAD
                await this.allowReconnection(client, 1);
=======
                try {
                  await this.allowReconnection(client, 1);
                } catch (e) {
                  onLeaveFinished.resolve(true);
                }
>>>>>>> 1a7da98cbeee551587e6119d06a39a441421827b
              }
              onDispose() { onRoomDisposed.resolve(true); }
            });

            // Close WebSocket connetion before `onJoin` completes
```