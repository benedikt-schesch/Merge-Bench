<think>
No reasoning found</think>
```typescript
      try {
        if (authData) {
          client.auth = authData;

        } else if (this.onAuth !== Room.prototype.onAuth) {
<<<<<<< HEAD
          client.auth = await this.onAuth(client, joinOptions, authContext);
=======
          try {
            client.auth = await this.onAuth(client, joinOptions, req);
>>>>>>> 1a7da98cbeee551587e6119d06a39a441421827b

            if (!client.auth) {
              throw new ServerError(ErrorCode.AUTH_FAILED, 'onAuth failed');
            }


```