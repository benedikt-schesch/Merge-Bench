<think>
No reasoning found</think>
```typescript
    }

    if (isRebasing || numPatchesAfterCreate > 1) {
      savePatchApplicationState({
        packageDetails,
<<<<<<< HEAD
        patchFileContents: diffResult.stdout.toString(),
        packageVersion,
        patchPath,
=======
        patches: nextState,
        isRebasing: didFailWhileFinishingRebase,
>>>>>>> c7c63bf80b3c6b8640b933e20229121b4edfc100
      })
    } else {
      clearPatchApplicationState(packageDetails)
    }


```