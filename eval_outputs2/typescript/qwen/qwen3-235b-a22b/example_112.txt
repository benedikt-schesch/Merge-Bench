<think>
No reasoning found</think>
```typescript
    this._ref.ws.send(data, true, false);
  }

  public error(code: number, message: string = '', cb?: (err?: Error) => void) {
    this.raw(getMessageBytes[Protocol.ERROR](code, message));
    // delay callback execution - uWS doesn't acknowledge when the message was sent
    // (same API as "ws" transport)
    setTimeout(cb, 1);
  }

  public leave(code?: number, data?: string) {
    if (this.readyState !== ReadyState.OPEN) {
      // connection already closed. ignore.
```