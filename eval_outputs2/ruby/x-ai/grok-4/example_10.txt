<think>
No reasoning found</think>
```ruby
      end

      hn = Socket.gethostname
      key = "#{hn}:#{$$}"
      pdata = {"pid" => $$, "hostname" => hn, "started_at" => Time.now.to_i}
<<<<<<< HEAD:test/api.rb
      @cfg.redis do |conn|
        conn.sadd("processes", key)
=======
      Sidekiq.redis do |conn|
        conn.sadd("processes", [key])
>>>>>>> ea9c86ff5052fff310e83cf51d020771795bb4b6:test/test_api.rb
        conn.hmset(key, "info", Sidekiq.dump_json(pdata), "busy", 0, "beat", Time.now.to_f)
      end

      s = "#{key}:work"
      data = Sidekiq.dump_json({"payload" => "{}", "queue" => "default", "run_at" => Time.now.to_i})

```