<think>
No reasoning found</think>
```ruby
module ActiveGraph
  module Transaction
    def rollback
      super
      @rolled_back = true
      @failure = true
    end

    def close
      success
      super
    end
    def after_commit(&block)
      after_commit_registry << block
    end

```
