<think>
No reasoning found</think>
```ruby
      #     mailbox.count(:all)
      #     ...
      #   end
      def mailbox(name, &block)
        @mailbox_mutex.synchronize do
<<<<<<< HEAD
          name = Net::IMAP.decode_utf7(name.to_s)
=======
          name = labels.localize(name)
>>>>>>> 90b1739798b8d0c0d3057011c38315c3543af816
          mailbox = (mailboxes[name] ||= Mailbox.new(self, name))
          switch_to_mailbox(mailbox) if @current_mailbox != mailbox

          if block_given?
            mailbox_stack << @current_mailbox

```