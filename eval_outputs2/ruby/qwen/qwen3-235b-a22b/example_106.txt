<think>
No reasoning found</think>
```ruby
        self
      elsif Rails.version < "4"
        # for Rails < 4: use scoped method
        self.klass.scoped(@finder_options)
      else
        # TODO Refactor this.  There is certainly a better way.
        self.klass.joins(@finder_options[:joins]).includes(@finder_options[:include]).where(@finder_options[:conditions])
      end
    end

    # Consumes the given obligation, converting it into scope join and condition options.
    def parse!( obligation )

```