<think>
No reasoning found</think>
```ruby
module PhotosHelper
  # Rails automatically includes this, but not until after this file,
  # so the :image_path won't exist for the alias_method_chain call, below.
  # Thus, we include it now:
  include ActionView::Helpers::AssetTagHelper
  
  def image photo, size = :square, img_opts = {}
    return image_tag(image_path( photo, size), :class => size) if photo.image.blank?
    img_tag = image_tag(image_path( photo, size), {:title=>photo.caption, :alt=>photo.caption, :class=>size}.merge(img_opts))
    img_tag
```