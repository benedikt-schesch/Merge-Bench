<think>
No reasoning found</think>
The intention of the HEAD change is to handle both the advertising state and the GATT server closing when the Bluetooth adapter is turning off. The other side only handles the GATT server. We should keep both changes.

Here is the resolved snippet:

```java

            if (initPeripheralCallback != null) initPeripheralCallback.sendPluginResult(pluginResult);

            break;
          case BluetoothAdapter.STATE_TURNING_OFF:
            // Reset isAdvertising when adapter is turning off
            if (isAdvertising) isAdvertising = false;

            // Make sure gattServer is not null (in case this triggers when it is null)
            if (gattServer != null) gattServer.close();
            break;
          case BluetoothAdapter.STATE_ON:

            addProperty(returnObj, keyStatus, statusEnabled);

```