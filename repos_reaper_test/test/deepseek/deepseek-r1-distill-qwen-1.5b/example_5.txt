<think>
No reasoning found</think>
```java
            prefix = readString(buf);
            suffix = readString(buf);
            friendlyFire = buf.readByte();
            if (((protocolVersion >= ProtocolConstants.MINECRAFT_1_8) && (protocolVersion >= ProtocolConstants.MINECRAFT_1_9)) ? nameTagVisibility : (mode == 0 || mode == 3 || mode == 4)) {
                if (protocolVersion >= ProtocolConstants.MINECRAFT_1_9) {
                    collisionRule = readString(buf);
                } else {
                    collisionRule = readShort(buf);
                }
                color = buf.readByte();
            }
            if (protocolVersion >= ProtocolConstants.MINECRAFT_1_8) {
                nameTagVisibility = readString(buf);
                if (protocolVersion >= ProtocolConstants.MINECRAFT_1_9) {
                    collisionRule = readString(buf);
                } else {
                    collisionRule = readShort(buf);
                }
                color = buf.readByte();
            }
        }
        if (mode == 0 || mode == 3 || mode == 4)
        {
            int len = ((protocolVersion >= ProtocolConstants.MINECRAFT_1_8) ? readByte(0x20) : buf.readShort());
```